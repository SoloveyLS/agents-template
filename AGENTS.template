# AGENTS.template — Fast Repo Agentic Initialization Guide
Use this document as an *operator’s guide* for Codex / OpenCode / Claude Code / any agent to quickly generate a high-quality `AGENTS.md` and/or `CLAUDE.md` for a new repository.

This is intentionally repo-agnostic. Replace placeholders with facts discovered from the repo and from the user.

---

## Goal
Produce a repo-specific **agent instruction file** (`AGENTS.md` and/or `CLAUDE.md`) that enables:
- fast onboarding (how to run, test, and change the project),
- safe operation (boundaries, secrets, sandboxing),
- consistent delivery (workflow + quality gates).

### Output targets
- **`AGENTS.md`**: general agent + contributor workflow, repo conventions, safety, quality gates.
- **`CLAUDE.md`** (optional): Claude Code–specific “operating manual” (commands, environment, do/don’t, test workflow).  
  If both exist, keep them consistent; make them 'aware' of each other.

---

## Fast Initialization Workflow (do this in order)

### Step 1 — Ask the user the minimum set of questions (2–5 minutes)
Collect only what cannot be reliably inferred from the repo:

1) **What are we building and for whom?** (1–2 sentences)  
2) **What is “done” for agent work?**  
   - e.g., “PR-ready with tests passing”, “just a patch file”, “no behavior changes without approval”.
3) **Any hard constraints?**
   - languages/versions locked, no network access, no Docker, offline mode, etc.
4) **Security/compliance requirements?**
   - PII, secrets, audit logs, data retention, export controls.
5) **Preferred workflow?**
   - trunk-based vs branches, commit style, changelog requirements, etc.

If user doesn’t know: propose defaults and explicitly mark them as assumptions in the draft.

---

### Step 2 — Scan the repository to extract facts (5–15 minutes)
Derive the “truth” from files. Prioritize:

**A) How to run**
- Look for: `README*`, `docs/`, `Makefile`, `Taskfile.yml`, `justfile`
- Also: `package.json`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Dockerfile`, `compose.yml`

**B) How to test & check**
- CI configs: `.github/workflows/*`, `.gitlab-ci.yml`, etc.
- Lint/type/format configs: `.pre-commit-config.yaml`, `ruff.toml`, `.eslintrc*`, `mypy.ini`, `.editorconfig`, etc.

**C) Project structure**
- Identify “core” directories (source, tools, tests, docs, schemas, migrations)

**D) Runtime constraints**
- Version files: `.python-version`, `.nvmrc`, `.tool-versions`, `runtime.txt`
- Containerization and deployment configs

Record findings as bullet notes while scanning; you’ll paste them into the final doc.

---

### Step 3 — Normalize into a single “Core Commands” set (critical)
Your output must include commands that work for a new contributor on a clean checkout.

Try to produce these canonical commands:

```bash
# Install dependencies
...

# Run (app/service/cli)
...

# Run tests
...

# Lint/format/type-check (or “check”)
...

# CI-equivalent (optional but recommended)
...
